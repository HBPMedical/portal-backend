# Configuration template for the portal running inside a Docker container

# See http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html

spring.portal-datasource.url="jdbc:postgresql://127.0.0.1:5433/portal"
spring.portal-datasource.schema="public"
spring.portal-datasource.username="portal"
spring.portal-datasource.password="portalpwd"
spring.portal-datasource.driver-class-name=org.postgresql.Driver

spring.data.jpa.repositories.bootstrap-mode=default
spring.jpa.hibernate.dialect=org.hibernate.dialect.PostgreSQL9Dialect
spring.jpa.hibernate.ddl-auto=validate

# WEB FRONTEND
frontend.loginUrl="http://127.0.0.1/services/login/hbp" }}
frontend.redirectAfterLoginUrl="http://127.0.0.1/"
frontend.redirectAfterLogoutUrl="http://127.0.0.1/services/login/hbp"

logging.level.root="DEBUG"
logging.level.org="DEBUG"
logging.level.eu.hbp="DEBUG"

# EMBEDDED SERVER CONFIGURATION
server.servlet.contextPath="/services"
server.port=8080
server.forward-headers-strategy=native
server.session.timeout="2592000"

# ENDPOINTS
endpoints.enabled=true
endpoints.health.enabled: true
endpoints.health.endpoint: "/health"
endpoints.health.sensitive: false

# External Services
services.exareme.queryExaremeUrl="http://localhost:9090/mining/query"
services.exareme.algorithmsUrl="http://localhost:9090/mining/algorithms.json"


galaxy.galaxyUrl="http://localhost:8090/"
galaxy.galaxyContext="nativeGalaxy/workflows/list"
galaxy.galaxyApiKey="sfas"
galaxy.galaxyUsername="admin"
galaxy.galaxyPassword="password"

# Authentication
authentication.enabled="1"

# Keycloak
keycloak.enabled=true
keycloak.auth-server-url="http://127.0.0.1/auth"
keycloak.realm="MIP"
keycloak.resource="MIP"
keycloak.enable-basic-auth=true
keycloak.credentials.secret="dae83a6b-c769-4186-8383-f0984c6edf05"
keycloak.principal-attribute="preferred_username"
#  cors: true
#  cors-max-age: 3600
#  cors-allowed-methods: "GET, POST, PUT, PATCH, OPTIONS, DELETE"
#  cors-allowed-headers: "*"
#  cors-exposed-headers: "*"

# logoutUrl: {{ .Env.LOGOUT_URL }}
